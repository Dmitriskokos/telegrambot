import logging
import uuid

from aiogram import Bot, Dispatcher, types
from aiogram.utils.keyboard import InlineKeyboardBuilder

from database import get_personal_bot_info


async def personal_bot_handler(callback: types.CallbackQuery, bot: Bot):
    user_id = callback.from_user.id
    log_id = uuid.uuid4()
    logging.info(f"{log_id} - personalbot.py - personal_bot_handler: User {user_id} pressed '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç'") # User {user_id} pressed 'Personal bot'

    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º –±–æ—Ç–µ –∏–∑ –ë–î
    user_bot_info = get_personal_bot_info(user_id)
    if user_bot_info and user_bot_info.get("personal_bot_username"):
        bot_username = user_bot_info.get("personal_bot_username")
        await callback.message.answer(
        f"–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç @{bot_username}\n\n"
        "–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤–æ–≥–æ - –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π:\n\n"
        "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±–æ—Ç - https://t.me/BotFather\n"
        "2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É \"START\"\n"
        "3. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É \"/newbot\"\n"
        "4. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–æ–π–¥–µ—Ç –ª—é–±–æ–µ\n"
        "5. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º (username) –±–æ—Ç–∞, –ø–æ–¥–æ–π–¥—É—Ç –ª—é–±—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã —é–∑–µ—Ä–Ω–µ–π–º –æ–∫–∞–Ω—á–∏–≤–∞–ª—Å—è –Ω–∞ \"bot\"\n"
        "6. –ï—Å–ª–∏ –í—ã –≤—Å–µ —Å–¥–µ–ª–∞–ª–∏ –≤–µ—Ä–Ω–æ, –í–∞–º –ø—Ä–∏–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞:\n\n"
        "Done! Congratulations on your new bot.\n\n"
        "–í –¥–∞–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—É–¥–µ—Ç –Ω–∞–±–æ—Ä –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n"
        "<code>1111111111:AAAAAAAAAAAAAA_GchLGbMkBdSBRIEspy11</code>\n\n"
        "7. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –æ–Ω —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏ –∑–∞–π–¥–∏—Ç–µ –Ω–∞ —ç—Ç–æ—Ç –±–æ—Ç –∏ –ø–∏—à–∏—Ç–µ –≤–æ—Ç —Ç–∞–∫ \n"
        "–í—ã –¥–æ–ª–∂–Ω—ã —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å /bot, –∑–∞—Ç–µ–º –≤—Å—Ç–∞–≤–∏—Ç—å –≤—ã–¥–∞–Ω–Ω—ã–π –≤–∞–º —Ç–æ–∫–µ–Ω, –∏ –¥–ª—è –≤–∞—Å –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–æ—Ç.\n\n"
        "–ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã :\n\n"
        "<code>/bot 1111111111:AAAAAAAAAA_GchLGbMkBdSBRIEspy11</code>\n\n"
        "–±–æ—Ç –≤—ã—à–ª–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à –±–æ—Ç - –ø–æ–∫—É–ø–∞–π—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ\n", parse_mode="HTML", disable_web_page_preview=True)
    else:
      text = (
            "ü§ñ <b>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞</b>\n\n"
            "–ë–æ–Ω—É—Å –Ω–∞ –±–∞–ª–∞–Ω—Å –∑–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: 20 $ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ\n"
            "–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç –í–∞–º –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è \"–≤ –∑–æ–Ω–µ –ø–æ–∫—É–ø–æ–∫\", –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ —É –í–∞—Å –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Ç–æ–≤–∞—Ä –≤ –Ω–µ–º, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º - –º—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ–º —Å –í–∞–º–∏ —Å–≤—è–∑—å!\n\n"
            "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –±–æ—Ç–∞:\n\n"
            "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±–æ—Ç - https://t.me/BotFather\n"
            "2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É \"START\"\n"
            "3. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É \"/newbot\"\n"
            "4. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–æ–π–¥–µ—Ç –ª—é–±–æ–µ\n"
            "5. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏ –≤–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º (username) –±–æ—Ç–∞, –ø–æ–¥–æ–π–¥—É—Ç –ª—é–±—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã —é–∑–µ—Ä–Ω–µ–π–º –æ–∫–∞–Ω—á–∏–≤–∞–ª—Å—è –Ω–∞ \"bot\"\n"
            "6. –ï—Å–ª–∏ –í—ã –≤—Å–µ —Å–¥–µ–ª–∞–ª–∏ –≤–µ—Ä–Ω–æ, –í–∞–º –ø—Ä–∏–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞:\n\n"
            "Done! Congratulations on your new bot.\n\n"
            "–í –¥–∞–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—É–¥–µ—Ç –Ω–∞–±–æ—Ä –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n\n"
            "<code>1111111111:AAAAAAAAAAAAAA_GchLGbMkBdSBRIEspy11</code>\n\n"
            "7. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –æ–Ω —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏ –∑–∞–π–¥–∏—Ç–µ –Ω–∞ —ç—Ç–æ—Ç –±–æ—Ç –∏ –ø–∏—à–∏—Ç–µ –≤–æ—Ç —Ç–∞–∫ \n"
            "–í—ã –¥–æ–ª–∂–Ω—ã —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å /bot, –∑–∞—Ç–µ–º –≤—Å—Ç–∞–≤–∏—Ç—å –≤—ã–¥–∞–Ω–Ω—ã–π –≤–∞–º —Ç–æ–∫–µ–Ω, –∏ –¥–ª—è –≤–∞—Å –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–æ—Ç.\n\n"
            "–ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã :\n\n"
            "<code>/bot 1111111111:AAAAAAAAAA_GchLGbMkBdSBRIEspy11</code>\n\n"
            "–±–æ—Ç –≤—ã—à–ª–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à –±–æ—Ç - –ø–æ–∫—É–ø–∞–π—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ\n"
        )
      await callback.message.answer(text, parse_mode="HTML", disable_web_page_preview=True)
    await callback.answer()